<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>Controller API</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Controller API</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_tools">1. Tools</a></li>
<li><a href="#api_browsable_api">2. Browsable API</a></li>
<li><a href="#_conventions">3. Conventions</a></li>
<li><a href="#_sorting">4. Sorting</a></li>
<li><a href="#_searching">5. Searching</a></li>
<li><a href="#_filtering">6. Filtering</a></li>
<li><a href="#_pagination">7. Pagination</a></li>
<li><a href="#_access_resources">8. Access Resources</a>
<ul class="sectlevel2">
<li><a href="#_configuration_settings">8.1. Configuration Settings</a></li>
<li><a href="#_identifier_format_protocol">8.2. Identifier Format Protocol</a></li>
</ul>
</li>
<li><a href="#_read_only_fields">9. Read-only Fields</a></li>
<li><a href="#_authentication_methods_using_the_api">10. Authentication Methods Using the API</a>
<ul class="sectlevel2">
<li><a href="#api_session_auth">10.1. Session Authentication</a></li>
<li><a href="#_basic_authentication">10.2. Basic Authentication</a></li>
<li><a href="#api_oauth2_auth">10.3. OAuth 2 Token Authentication</a></li>
<li><a href="#api_sso_auth">10.4. SSO Authentication</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Using the Ansible Automation Platform Controller API.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tools"><a class="anchor" href="#_tools"></a>1. Tools</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document offers a basic understanding of the REST API used by
automation controller.</p>
</div>
<div class="paragraph">
<p>REST stands for Representational State Transfer and is sometimes spelled
as "ReST". It relies on a stateless, client-server, and cacheable
communications protocol, usually the HTTP protocol.</p>
</div>
<div class="paragraph">
<p>You may find it helpful to see which API calls the user interface makes
in sequence. To do this, you can use the UI from Firebug or Chrome with
developer plugins.</p>
</div>
<div class="paragraph">
<p>Another alternative is Charles Proxy (<a href="http://www.charlesproxy.com/" class="bare">http://www.charlesproxy.com/</a>),
which offers a visualizer that you may find helpful. While it is
commercial software, it can insert itself as an OS X proxy, for example,
and intercept both requests from web browsers as well as curl and other
API consumers.</p>
</div>
<div class="paragraph">
<p>Other alternatives include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Fiddler (<a href="http://www.telerik.com/fiddler" class="bare">http://www.telerik.com/fiddler</a>)</p>
</li>
<li>
<p>mitmproxy (<a href="https://mitmproxy.org/" class="bare">https://mitmproxy.org/</a>)</p>
</li>
<li>
<p>Live HTTP headers FireFox extension
(<a href="https://addons.mozilla.org/en-US/firefox/addon/live-http-headers/" class="bare">https://addons.mozilla.org/en-US/firefox/addon/live-http-headers/</a>)</p>
</li>
<li>
<p>Paros (<a href="http://sourceforge.net/projects/paros/" class="bare">http://sourceforge.net/projects/paros/</a>)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="api_browsable_api"><a class="anchor" href="#api_browsable_api"></a>2. Browsable API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>REST APIs provide access to resources (data entities) via URI paths. You
can visit the automation controller REST API in a web browser at:
<code><a href="http://&lt;server" class="bare">http://&lt;server</a> name&gt;/api/</code></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/rest-api.png" alt="REST API"></span></p>
</div>
<div class="paragraph">
<p>automation controller 3.2 introduced version 2 of the API, which can be
accessed by clicking the v2 link next to "available versions":</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/rest-api-available-versions.png" alt="REST API V2"></span></p>
</div>
<div class="paragraph">
<p>Alternatively, you can still access version 1 of the API this way, but
it <strong>will be removed</strong> in a future release of automation controller.</p>
</div>
<div class="paragraph">
<p>If you perform a <strong>GET</strong> just the <code>/api/</code> endpoint, it gives the
<code>current_version</code>, which would be the recommended version.</p>
</div>
<div class="paragraph">
<p>Clicking on various links in the API allows you to explore related
resources.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/rest-api-discover-resources.png" alt="REST API - discover resources"></span></p>
</div>
<div class="paragraph">
<p>Clicking on the
<span class="image"><img src="images/api-questionmark.png" alt="question"></span> next to
the page name (toward the top of the screen) for an API endpoint gives
you documentation on the access methods for that particular API endpoint
and what data is returned when using those methods.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/rest-api-docs.png" alt="REST API - docs"></span></p>
</div>
<div class="paragraph">
<p>You can also use PUT and POST verbs on the specific API pages by
formatting JSON in the various text fields.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/rest-api-post-to-api-via-form.png" alt="REST API - POST to API via form"></span></p>
</div>
<div class="paragraph">
<p>You can also view changed settings from factory defaults at
<code>/api/v2/settings/changed/</code> endpoint. It reflects changes you made in
the API browser, not changed settings that come from static settings
files.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/rest-api-changed-settings.png" alt="REST API - Changes to Settings"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conventions"><a class="anchor" href="#_conventions"></a>3. Conventions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ansible Automation Platform controller uses a standard REST API, rooted
at <code>/api/</code> on the server. The API is versioned for compatibility
reasons, and currently <code>api/v2/</code> is the latest available version. You
can see information about what API versions are available by querying
<code>/api/</code>.</p>
</div>
<div class="paragraph">
<p><code>/api/v1/</code> has been discontinued as of automation controller version
3.6. Refer to previous versions of the api for details on v1.</p>
</div>
<div class="paragraph">
<p>You may have to specify the content/type on <strong>POST</strong> or <strong>PUT</strong> requests
accordingly.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>PUT</strong>: Update a specific resource (by an identifier) or a collection
of resources. PUT can also be used to create a specific resource if the
resource identifier is known before-hand.</p>
</li>
<li>
<p><strong>POST</strong>: Create a new resource. Also acts as a catch-all verb for
operations that do not fit into the other categories.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All URIs not ending with <code>"/"</code> receive a 301 redirect.</p>
</div>
<div class="paragraph">
<p>Note</p>
</div>
<div class="paragraph">
<p>API change: Formatting of extra_vars attached to Job Template records is
preserved. Previously, YAML would be converted to JSON and returned as
JSON. In 2.2.0 and newer, YAML is returned as YAML with formatting and
comments preserved, and JSON is returned as JSON.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sorting"><a class="anchor" href="#_sorting"></a>4. Sorting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To provide examples that are easy to follow, the following URL is used
throughout this guide:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://&lt;server name&gt;/api/v2/groups/</pre>
</div>
</div>
<div class="paragraph">
<p>To specify that \{\{ model_verbose_name_plural }} are returned in a
particular order, use the <code>order_by</code> query string parameter on the <strong>GET</strong>
request.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://&lt;server name&gt;/api/v2/model_verbose_name_plural?order_by={{ order_field }}</pre>
</div>
</div>
<div class="paragraph">
<p>Prefix the field name with a dash (<code>-</code>) to sort in reverse:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://&lt;server name&gt;/api/v2/model_verbose_name_plural?order_by=-{{ order_field }}</pre>
</div>
</div>
<div class="paragraph">
<p>Multiple sorting fields may be specified by separating the field names
with a comma (<code>,</code>):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://&lt;server name&gt;/api/v2/model_verbose_name_plural?order_by={{ order_field }},some_other_field</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_searching"><a class="anchor" href="#_searching"></a>5. Searching</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use the search query string parameter to perform a case-insensitive
search within all designated text fields of a model (added in AWX 1.4):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://&lt;server name&gt;/api/v2/model_verbose_name?search=findme</pre>
</div>
</div>
<div class="paragraph">
<p>Search across related fields (added in AWX 1.4 / automation controller
3.1):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://&lt;server name&gt;/api/v2/model_verbose_name?related__search=findme</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_filtering"><a class="anchor" href="#_filtering"></a>6. Filtering</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Any collection is what the system calls a "queryset" and can be filtered
via various operators.</p>
</div>
<div class="paragraph">
<p>For example, to find the groups that contain the name "foo":</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://&lt;controller server name&gt;/api/v2/groups/?name__contains=foo</pre>
</div>
</div>
<div class="paragraph">
<p>To find an exact match:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://&lt;controller server name&gt;/api/v2/groups/?name=foo</pre>
</div>
</div>
<div class="paragraph">
<p>If a resource is of an integer type, you must add <code>\_\_int</code> to the end
to cast your string input value to an integer, like so:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://&lt;controller server name&gt;/api/v2/arbitrary_resource/?x__int=5</pre>
</div>
</div>
<div class="paragraph">
<p>Related resources can also be queried, like so:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://&lt;controller server name&gt;/api/v2/users/?first_name__icontains=kim</pre>
</div>
</div>
<div class="paragraph">
<p>This will return all users with names that include the string "Kim" in
them.</p>
</div>
<div class="paragraph">
<p>You can also filter against multiple fields at once:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://&lt;controller server name&gt;/api/v2/groups/?name__icontains=test&amp;has_active_failures=false</pre>
</div>
</div>
<div class="paragraph">
<p>This finds all groups containing the name "test" that has no active
failures.</p>
</div>
<div class="paragraph">
<p>For more about what types of operators are available, refer to:
<a href="https://docs.djangoproject.com/en/dev/ref/models/querysets/" class="bare">https://docs.djangoproject.com/en/dev/ref/models/querysets/</a></p>
</div>
<div class="paragraph">
<p>Note</p>
</div>
<div class="paragraph">
<p>You can also watch the API as the UI is being used to see how it is
filtering on various criteria.</p>
</div>
<div class="paragraph">
<p>Any additional query string parameters may be used to filter the list of
results returned to those matching a given value. Only fields and
relations that exist in the database may be used for filtering. Any
special characters in the specified value should be url-encoded. For
example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>?field=value%20xyz</pre>
</div>
</div>
<div class="paragraph">
<p>Fields may also span relations, only for fields and relationships
defined in the database:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>?other__field=value</pre>
</div>
</div>
<div class="paragraph">
<p>To exclude results matching certain criteria, prefix the field parameter
with <code>not__</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>?not__field=value</pre>
</div>
</div>
<div class="paragraph">
<p>By default, all query string filters are AND&#8217;ed together, so only the
results matching all filters will be returned. To combine results
matching any one of multiple criteria, prefix each query string
parameter with <code>or__</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>?or__field=value&amp;or__field=othervalue
?or__not__field=value&amp;or__field=othervalue</pre>
</div>
</div>
<div class="paragraph">
<p>The default AND filtering applies all filters simultaneously to each
related object being filtered across database relationships. The chain
filter instead applies filters separately for each related object. To
use, prefix the query string parameter with <code>chain__</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>?chain__related__field=value&amp;chain__related__field2=othervalue
?chain__not__related__field=value&amp;chain__related__field2=othervalue</pre>
</div>
</div>
<div class="paragraph">
<p>If the first query above were written as
<code>?related<em>field=value&amp;related</em>field2=othervalue</code>, it would return only
the primary objects where the same related object satisfied both
conditions. As written using the chain filter, it would return the
intersection of primary objects matching each condition.</p>
</div>
<div class="paragraph">
<p>Field lookups may also be used for more advanced queries, by appending
the lookup to the field name:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>?field__lookup=value</pre>
</div>
</div>
<div class="paragraph">
<p>The following field lookups are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>exact</code>: Exact match (default lookup if not specified).</p>
</li>
<li>
<p><code>iexact</code>: Case-insensitive version of exact.</p>
</li>
<li>
<p><code>contains</code>: Field contains value.</p>
</li>
<li>
<p><code>icontains</code>: Case-insensitive version of contains.</p>
</li>
<li>
<p><code>startswith</code>: Field starts with value.</p>
</li>
<li>
<p><code>istartswith</code>: Case-insensitive version of startswith.</p>
</li>
<li>
<p><code>endswith</code>: Field ends with value.</p>
</li>
<li>
<p><code>iendswith</code>: Case-insensitive version of endswith.</p>
</li>
<li>
<p><code>regex</code>: Field matches the given regular expression.</p>
</li>
<li>
<p><code>iregex</code>: Case-insensitive version of regex.</p>
</li>
<li>
<p><code>gt</code>: Greater than comparison.</p>
</li>
<li>
<p><code>gte</code>: Greater than or equal to comparison.</p>
</li>
<li>
<p><code>lt</code>: Less than comparison.</p>
</li>
<li>
<p><code>lte</code>: Less than or equal to comparison.</p>
</li>
<li>
<p><code>isnull</code>: Check whether the given field or related object is null;
expects a boolean value.</p>
</li>
<li>
<p><code>in</code>: Check whether the given field&#8217;s value is present in the list
provided; expects a list of items.</p>
</li>
<li>
<p>Boolean values may be specified as <code>True</code> or <code>1</code> for true, <code>False</code> or
<code>0</code> for false (both case-insensitive).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, <code>?created__gte=2020-01-01</code> will provide a list of items
created after 1/1/2020.</p>
</div>
<div class="paragraph">
<p>Null values may be specified as <code>None</code> or <code>Null</code> (both
case-insensitive), though it is preferred to use the <code>isnull</code> lookup to
explicitly check for null values.</p>
</div>
<div class="paragraph">
<p>Lists (for the <code>in</code> lookup) may be specified as a comma-separated list
of values.</p>
</div>
<div class="paragraph">
<p>Filtering based on the requesting user&#8217;s level of access by query string
parameter (added in automation controller 3.1):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>role_level</code>: Level of role to filter on, such as <code>admin_role</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pagination"><a class="anchor" href="#_pagination"></a>7. Pagination</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Responses for collections in the API are paginated. This means that
while a collection may contain tens or hundreds of thousands of objects,
in each web request, only a limited number of results are returned for
API performance reasons.</p>
</div>
<div class="paragraph">
<p>When you get back the result for a collection you will see something
similar to the following:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{'count': 25, 'next': 'http://testserver/api/v2/some_resource?page=2', 'previous': None, 'results': [ ... ] }</pre>
</div>
</div>
<div class="paragraph">
<p>To get the next page, simply request the page given by the 'next'
sequential URL.</p>
</div>
<div class="paragraph">
<p>Use the <code>page_size=XX</code> query string parameter to change the number of
results returned for each request.</p>
</div>
<div class="paragraph">
<p>The <code>page_size</code> has a default maximum limit configured to 200, which is
enforced when a user tries a value beyond it, for example,
<code>?page_size=1000</code>. However, you can change this limit by setting the
value in <code>/etc/tower/conf.d/&lt;some file&gt;.py</code> to something higher, e.g.
<code>MAX_PAGE_SIZE=1000</code>.</p>
</div>
<div class="paragraph">
<p>Use the <code>page</code> query string parameter to retrieve a particular page of
results.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://&lt;server name&gt;/api/v2/model_verbose_name?page_size=100&amp;page=2</pre>
</div>
</div>
<div class="paragraph">
<p>The previous and next links returned with the results will set these
query string parameters automatically.</p>
</div>
<div class="paragraph">
<p>The serializer is quite efficient, but you should probably not request
page sizes beyond a couple of hundred.</p>
</div>
<div class="paragraph">
<p>The user interface uses smaller values to avoid the user having to do a
lot of scrolling.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_access_resources"><a class="anchor" href="#_access_resources"></a>8. Access Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Traditionally, automation controller uses a primary key to access
individual resource objects. Starting in 3.2 and API v2, the named URL
feature allows you to access controller resources via resource-specific
human-readable identifiers. In automation controller versions prior to
3.2, the only way of accessing a resource object without auxiliary query
string is via resource primary key number, for example, via URL path:
<code>/api/v2/hosts/2/</code>. Now, you can use a named URL to do the same thing,
for example, via URL path
<code>/api/v2/hosts/host_nameinv_nameorg_name/</code>.</p>
</div>
<div class="sect2">
<h3 id="_configuration_settings"><a class="anchor" href="#_configuration_settings"></a>8.1. Configuration Settings</h3>
<div class="paragraph">
<p>There are two named-URL-related configuration settings available under
<code>/api/v2/settings/named-url/</code>:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><code>NAMED_URL_FORMATS</code> and <code>NAMED_URL_GRAPH_NODES</code></p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><code>NAMED_URL_FORMATS</code> is a read only key-value pair list of all available
named URL identifier formats. A typical <code>NAMED_URL_FORMATS</code> looks like
this:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>"NAMED_URL_FORMATS": {
    "organizations": "&lt;name&gt;",
    "teams": "&lt;name&gt;++&lt;organization.name&gt;",
    "credential_types": "&lt;name&gt;+&lt;kind&gt;",
    "credentials": "&lt;name&gt;++&lt;credential_type.name&gt;+&lt;credential_type.kind&gt;++&lt;organization.name&gt;",
    "notification_templates": "&lt;name&gt;++&lt;organization.name&gt;",
    "job_templates": "&lt;name&gt;++&lt;organization.name&gt;",
    "projects": "&lt;name&gt;++&lt;organization.name&gt;",
    "inventories": "&lt;name&gt;++&lt;organization.name&gt;",
    "hosts": "&lt;name&gt;++&lt;inventory.name&gt;++&lt;organization.name&gt;",
    "groups": "&lt;name&gt;++&lt;inventory.name&gt;++&lt;organization.name&gt;",
    "inventory_sources": "&lt;name&gt;++&lt;inventory.name&gt;++&lt;organization.name&gt;",
    "inventory_scripts": "&lt;name&gt;++&lt;organization.name&gt;",
    "instance_groups": "&lt;name&gt;",
    "labels": "&lt;name&gt;++&lt;organization.name&gt;",
    "workflow_job_templates": "&lt;name&gt;++&lt;organization.name&gt;",
    "workflow_job_template_nodes": "&lt;identifier&gt;++&lt;workflow_job_template.name&gt;++&lt;organization.name&gt;",
    "applications": "&lt;name&gt;++&lt;organization.name&gt;",
    "users": "&lt;username&gt;",
    "instances": "&lt;hostname&gt;"
}</pre>
</div>
</div>
<div class="paragraph">
<p>For each item in <code>NAMED_URL_FORMATS</code>, the key is the API name of the
resource to have named URL, the value is a string indicating how to form
a human-readable unique identifier for that resource.
<code>NAMED_URL_FORMATS</code> exclusively lists every resource that can have named
URL, any resource not listed there has no named URL. If a resource can
have named URL, its objects should have a named_url field which
represents the object-specific named URL. That field should only be
visible under detail view, not list view. You can access specified
resource objects using accurately generated named URL. This includes not
only the object itself but also its related URLs. For example, if
<code>/api/v2/res_name/obj_slug/</code> is valid,
<code>/api/v2/res_name/obj_slug/related_res_name/</code> should also be valid.</p>
</div>
<div class="paragraph">
<p><code>NAMED_URL_FORMATS</code> are instructive enough to compose human-readable
unique identifier and named URL themselves. For ease-of-use, every
object of a resource that can have named URL will have a related field
<code>named_url</code> that displays that object&#8217;s named URL. You can copy and
paste that field for your own custom use. Also refer to the help text of
API browser if a resource object has named URL for further guidance.</p>
</div>
<div class="paragraph">
<p>Suppose you want to manually determine the named URL for a label with ID
5. A typical procedure of composing a named URL for this specific
resource object using <code>NAMED_URL_FORMATS</code> is to first look up the labels
field of <code>NAMED_URL_FORMATS</code> to get the identifier format
<code>&lt;name&gt;++&lt;organization.name&gt;</code>:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="ulist">
<ul>
<li>
<p>The first part of the URL format is <code>&lt;name&gt;</code>, which indicates that the
label resource detail can be found in <code>/api/v2/labels/5/</code>, and look for
<code>name</code> field in returned JSON. Suppose you have the <code>name</code> field with
value 'Foo', then the first part of the unique identifier is <strong>Foo</strong>.</p>
</li>
<li>
<p>The second part of the format are double pluses . That is the
delimiter that separates different parts of a unique identifier. Append
them to the unique identifier to get *Foo*</p>
</li>
<li>
<p>The third part of the format is <code>&lt;organization.name&gt;</code>, which indicates
that field is not in the current label object under investigation, but
in an organization which the label object points to. Thus, as the format
indicates, look up the organization in the related field of current
returned JSON. That field may or may not exist. If it exists, follow the
URL given in that field, for example, <code>/api/v2/organizations/3/</code>, to get
the detail of the specific organization, extract its <code>name</code> field, for
example, 'Default', and append it to our current unique identifier.
Since <code>&lt;organizations.name&gt;</code> is the last part of format, thus,
generating the resulting named URL: <code>/api/v2/labels/FooDefault/`. In
the case where organization does not exist in related field of the label
object detail, append an empty string instead, which essentially does
not alter the current identifier. So `Foo</code> becomes the final unique
identifier and the resulting generated named URL becomes
<code>/api/v2/labels/Foo++/</code>.</p>
</li>
</ul>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>An important aspect of generating a unique identifier for named URL has
to do with reserved characters. Because the identifier is part of a URL,
the following reserved characters by URL standard is encoded by
percentage symbols: <code>;/?:@=&amp;[]</code>. For example, if an organization is
named <code>;/?:@=&amp;[]</code>, its unique identifier should be
<code>%3B%2F%3F%3A%40%3D%26%5B%5D</code>. Another special reserved character is
<code>+</code>, which is not reserved by URL standard but used by named URL to link
different parts of an identifier. It is encoded by <code>[+]</code>. For example,
if an organization is named <code>[+]</code>, its unique identifier is <code>%5B[+]%5D</code>,
where original <code>[</code> and <code>]</code> are percent encoded and <code>+</code> is converted to
<code>[+]</code>.</p>
</div>
<div class="paragraph">
<p>Although <code>NAMED_URL_FORMATS</code> cannot be manually modified, modifications
do occur automatically and expanded over time, reflecting underlying
resource modification and expansion. Consult the <code>NAMED_URL_FORMATS</code> on
the same cluster where you want to use the named URL feature.</p>
</div>
<div class="paragraph">
<p><code>NAMED_URL_GRAPH_NODES</code> is another read-only list of key-value pairs
that exposes the internal graph data structure used to manage named
URLs. This is not intended to be human-readable but should be used for
programmatically generating named URLs. An example script for generating
named URL given the primary key of arbitrary resource objects that can
have a named URL, using info provided by <code>NAMED_URL_GRAPH_NODES</code>, can be
found in GitHub at
<a href="https://github.com/ansible/awx/blob/devel/tools/scripts/pk_to_named_url.py" class="bare">https://github.com/ansible/awx/blob/devel/tools/scripts/pk_to_named_url.py</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_identifier_format_protocol"><a class="anchor" href="#_identifier_format_protocol"></a>8.2. Identifier Format Protocol</h3>
<div class="paragraph">
<p>Resources are identifiable by their unique keys, which are basically
tuples of resource fields. Every resource is guaranteed to have its
primary key number alone as a unique key, but there might be multiple
other unique keys. A resource can generate an identifier format thus,
have a named URL if it contains at least one unique key that satisfies
the rules below:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The key must contain only fields that are either the <code>name</code> field, or
text fields with a finite number of possible choices (like credential
type resource&#8217;s <code>kind</code> field).</p>
</li>
<li>
<p>The only allowed exceptional fields that breaks rule #1 is a
many-to-one related field relating to a resource other than itself,
which is also allowed to have a slug.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Suppose there are resources <code>Foo</code> and <code>Bar</code>, both <code>Foo</code> and <code>Bar</code>
contain a <code>name</code> field and a <code>choice</code> field that can only have value
'yes' or 'no'. Additionally, resource <code>Foo</code> contains a many-to-one field
(a foreign key) relating to <code>Bar</code>, e.g. <code>fk</code>. <code>Foo</code> has a unique key
tuple (<code>name</code>, <code>choice</code>, <code>fk</code>) and <code>Bar</code> has a unique key tuple (<code>name</code>,
<code>choice</code>). <code>Bar</code> can have named URL because it satisfies rule #1 above.
<code>Foo</code> can also have named URL, even though it breaks rule #1, the extra
field breaking rule #1 is the <code>fk</code> field, which is many-to-one-related
to <code>Bar</code> and <code>Bar</code> can have named URL.</p>
</div>
<div class="paragraph">
<p>For resources satisfying rule #1 above, their human-readable unique
identifiers are combinations of foreign key fields, delimited by <code>+</code>. In
specific, resource <code>Bar</code> in the above example will have slug format
<code>&lt;name&gt;+&lt;choice&gt;</code>. Note the field order matters in slug format: <code>name</code>
field always comes first if present, following by all the rest fields
arranged in lexicographic order of field name. For example, if Bar also
has an <code>a_choice</code> field satisfying rule #1 and the unique key becomes
(<code>name</code>, <code>choice</code>, <code>a_choice</code>), its slug format becomes
<code>&lt;name&gt;+&lt;a_choice&gt;+&lt;choice&gt;</code>.</p>
</div>
<div class="paragraph">
<p>For resources satisfying rule #2 above, if traced back via the extra
foreign key fields, the result is a tree of resources that all together
identify objects of that resource. In order to generate identifier
format, each resource in the traceback tree generates its own part of
standalone format in the way previously described, using all fields but
the foreign keys. Finally all parts are combined by <code>++</code> in the
following order:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Put stand-alone format as the first identifier component.</p>
</li>
<li>
<p>Recursively generate unique identifiers for each resource. The
underlying resource is pointing to using a foreign key (a child of a
traceback tree node).</p>
</li>
<li>
<p>Treat generated unique identifiers as the rest of the identifier
components. Sort them in lexicographic order of corresponding foreign
keys.</p>
</li>
<li>
<p>Combine all components together using <code>++</code> to generate the final
identifier format.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In reference to the example above, when generating an identifier format
for resource <code>Foo</code>, the controller generates the stand-alone formats,
<code>&lt;name&gt;+&lt;choice&gt;</code> for <code>Foo</code> and <code>&lt;fk.name&gt;+&lt;fk.choice&gt;</code> for <code>Bar</code>, then
combine them together to be <code>&lt;name&gt;+&lt;choice&gt;++&lt;fk.name&gt;+&lt;fk.choice&gt;</code>.</p>
</div>
<div class="paragraph">
<p>When generating identifiers according to the given identifier format,
there are cases where a foreign key may point to nowhere. In this case,
the controller substitutes the part of the format corresponding to the
resource the foreign key should point to with an empty string ''. For
example, if a <code>Foo</code> object has the name ='alice', choice ='yes', but
<code>fk</code> field = None, its resulting identifier will be <code>alice+yes++</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_read_only_fields"><a class="anchor" href="#_read_only_fields"></a>9. Read-only Fields</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Certain fields in the REST API are marked read-only. These usually
include the URL of a resource, the ID, and occasionally some internal
fields. For instance, the <code>'created\_by'</code> attribute of each object
indicates which user created the resource, and cannot be edited.</p>
</div>
<div class="paragraph">
<p>If you post some values and notice that they are not changing, these
fields may be read-only.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authentication_methods_using_the_api"><a class="anchor" href="#_authentication_methods_using_the_api"></a>10. Authentication Methods Using the API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the numerous enterprise authentication methods,
the best use case for each, and examples:</p>
</div>
<div class="paragraph">
<p>Automation controller is designed for organizations to centralize and
control their automation with a visual dashboard for out-of-the box
control while providing a REST API to integrate with your other tooling
on a deeper level. Automation controller supports a number of
authentication methods to make it easy to embed the controller into
existing tools and processes to help ensure the right people can access
controller resources.</p>
</div>
<div class="sect2">
<h3 id="api_session_auth"><a class="anchor" href="#api_session_auth"></a>10.1. Session Authentication</h3>
<div class="paragraph">
<p>Session authentication is used when logging in directly to automation
controllers API or UI to manually create resources (inventory, project,
job template) and launch jobs in the browser. With this method, you can
remain logged in for a prolonged period of time, not just for that HTTP
request, but for instance, when browsing the UI or API in a browser like
Chrome or Firefox. When a user logs in, a session cookie is created,
which enables the user to remain logged in when navigating to different
pages within the automation controller. Below represents the
communication that occurs between the client and server in a session.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/session-auth-architecture.png" alt="image"></span></p>
</div>
<div class="paragraph">
<p>Using the curl tool, you can see the activity that occurs when you log
into the controller.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>GET to the <code>/api/login/</code> endpoint to grab the <code>csrftoken</code> cookie.</p>
</li>
</ol>
</div>
<div class="literalblock">
<div class="content">
<pre>curl -k -c - https://&lt;controller-host&gt;/api/login/

localhost   FALSE   /   FALSE   0   csrftoken
AswSFn5p1qQvaX4KoRZN6A5yer0Pq0VG2cXMTzZnzuhaY0L4tiidYqwf5PXZckuj</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>POST to the <code>/api/login/</code> endpoint with username, password, and
X-CSRFToken=&lt;token-value&gt;.</p>
</li>
</ol>
</div>
<div class="literalblock">
<div class="content">
<pre>curl -X POST -H 'Content-Type: application/x-www-form-urlencoded' \
--referer https://&lt;controller-host&gt;/api/login/ \
-H 'X-CSRFToken: K580zVVm0rWX8pmNylz5ygTPamgUJxifrdJY0UDtMMoOis5Q1UOxRmV9918BUBIN' \
--data 'username=root&amp;password=reverse' \
--cookie 'csrftoken=K580zVVm0rWX8pmNylz5ygTPamgUJxifrdJY0UDtMMoOis5Q1UOxRmV9918BUBIN' \
https://&lt;controller-host&gt;/api/login/ -k -D - -o /dev/null</pre>
</div>
</div>
<div class="paragraph">
<p>All of this is done by the automation controller when you log in to the
UI or API in the browser, and should only be used when authenticating in
the browser. For programmatic integration with automation controller,
see <code>api_oauth2_auth</code>.</p>
</div>
<div class="paragraph">
<p>A typical response might look like:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Server: nginx
Date: &lt;current date&gt;
Content-Type: text/html; charset=utf-8
Content-Length: 0
Connection: keep-alive
Location: /accounts/profile/
X-API-Session-Cookie-Name: awx_sessionid
Expires: &lt;date&gt;
Cache-Control: max-age=0, no-cache, no-store, must-revalidate, private
Vary: Cookie, Accept-Language, Origin
Session-Timeout: 1800
Content-Language: en
X-API-Total-Time: 0.377s
X-API-Request-Id: 700826696425433fb0c8807cd40c00a0
Access-Control-Expose-Headers: X-API-Request-Id
Set-Cookie: userLoggedIn=true; Path=/
Set-Cookie: current_user=&lt;user cookie data&gt;; Path=/
Set-Cookie: csrftoken=&lt;csrftoken&gt;; Path=/; SameSite=Lax
Set-Cookie: awx_sessionid=&lt;your session id&gt;; expires=&lt;date&gt;; HttpOnly; Max-Age=1800; Path=/; SameSite=Lax
Strict-Transport-Security: max-age=15768000</pre>
</div>
</div>
<div class="paragraph">
<p>When a user is successfully authenticated with this method, the server
will respond with a header called <code>X-API-Session-Cookie-Name</code>,
indicating the configured name of the session cookie. The default value
is <code>awx_session_id</code> which you can see later in the <code>Set-Cookie</code> headers.</p>
</div>
<div class="paragraph">
<p>Note</p>
</div>
<div class="paragraph">
<p>The session expiration time can be changed by specifying it in the
<code>SESSION_COOKIE_AGE</code> parameter. Refer to <code>ag_session_limits</code> for further
detail.</p>
</div>
</div>
<div class="sect2">
<h3 id="_basic_authentication"><a class="anchor" href="#_basic_authentication"></a>10.2. Basic Authentication</h3>
<div class="paragraph">
<p>Basic Authentication (Basic Auth) is stateless, thus the base64-encoded
<code>username</code> and <code>password</code> must be sent along with each request via the
Authorization header. This can be used for API calls from curl requests,
python scripts, or individual requests to the API. <code>api_oauth2_auth</code> is
recommended for accessing the API when at all possible.</p>
</div>
<div class="paragraph">
<p>Example with curl:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>curl -X GET -H 'Authorization: Basic dXNlcjpwYXNzd29yZA== https://&lt;controller-host&gt;/api/v2/credentials -k -L

# the --user flag adds this Authorization header for us
curl -X GET --user 'user:password' https://&lt;controller-host&gt;/api/v2/credentials -k -L</pre>
</div>
</div>
<div class="paragraph">
<p>For more information about the Basic HTTP Authentication scheme, see
<a href="https://datatracker.ietf.org/doc/html/rfc7617">RFC 7617</a>.</p>
</div>
<div class="paragraph">
<p>Note</p>
</div>
<div class="paragraph">
<p>You can disable the Basic Auth for security purposes from the
Miscellaneous Authentication settings of the controller UI Settings
menu:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/configure-tower-auth-basic-off.png" alt="image"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="api_oauth2_auth"><a class="anchor" href="#api_oauth2_auth"></a>10.3. OAuth 2 Token Authentication</h3>
<div class="paragraph">
<p>OAuth (Open Authorization) is an open standard for token-based
authentication and authorization. OAuth 2 authentication is commonly
used when interacting with the controller API programmatically. Like
Basic Auth, an OAuth 2 token is supplied with each API request via the
Authorization header. Unlike Basic Auth, OAuth 2 tokens have a
configurable timeout and are scopable. Tokens have a configurable
expiration time and can be easily revoked for one user or for the entire
automation controller system by an admin if needed. This can be done
with the <code>ag_manage_utility_revoke_tokens</code> management command, which is
covered in more detail in Automation Controller Administration Guide or
by using the API as explained in <code>ag_oauth2_token_revoke</code>.</p>
</div>
<div class="paragraph">
<p>Note</p>
</div>
<div class="paragraph">
<p>By default, external users such as those created by SSO are not allowed
to generate OAuth tokens for security purposes. This can be changed from
the Miscellaneous Authentication settings of the controller UI Settings
menu:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/configure-tower-external-tokens-off.png" alt="image"></span></p>
</div>
<div class="paragraph">
<p>The different methods for obtaining OAuth 2 Access Tokens in automation
controller are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Personal access tokens (PAT)</p>
</li>
<li>
<p>Application Token: Password grant type</p>
</li>
<li>
<p>Application Token: Implicit grant type</p>
</li>
<li>
<p>Application Token: Authorization Code grant type</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information on the above methods, see <code>ag_oauth2_token_auth</code> in
the Automation Controller Administration Guide.</p>
</div>
<div class="paragraph">
<p>First, a user needs to create an OAuth 2 Access Token in the API or in
their Users <strong>Tokens</strong> tab in the UI. For further detail on creating them
through the UI, see <code>ug_users_tokens</code>. For the purposes of this example,
use the PAT method for creating a token in the API. Upon token creation,
the user can set the scope.</p>
</div>
<div class="paragraph">
<p>Note</p>
</div>
<div class="paragraph">
<p>The expiration time of the token can be configured system-wide. See
<code>ag_use_oauth_pat</code> for more detail.</p>
</div>
<div class="paragraph">
<p>Token authentication is best used for any programmatic use of the
automation controller API, such as Python scripts or tools like curl, as
in the example for creating a PAT (without an associated application)
below.</p>
</div>
<div class="paragraph">
<p><strong>Curl Example</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>curl -u user:password -k -X POST https://&lt;controller-host&gt;/api/v2/tokens/</pre>
</div>
</div>
<div class="paragraph">
<p>This call will return JSON data like:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/api_oauth2_json_returned_token_value.png" alt="image"></span></p>
</div>
<div class="paragraph">
<p>The value of the <code>token</code> property is what you can now use to perform a
GET request for an automation controller resource, e.g., Hosts.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>curl -k -X POST \
  -H Content-Type: application/json
  -H Authorization: Bearer &lt;oauth2-token-value&gt; \
  https://&lt;controller-host&gt;/api/v2/hosts/</pre>
</div>
</div>
<div class="paragraph">
<p>Similarly, you can launch a job by making a POST to the job template
that you want to launch.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>curl -k -X POST \
  -H "Authorization: Bearer &lt;oauth2-token-value&gt;" \
  -H "Content-Type: application/json" \
  --data '{"limit" : "ansible"}' \
  https://&lt;controller-host&gt;/api/v2/job_templates/14/launch/</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Python Example</strong></p>
</div>
<div class="paragraph">
<p><a href="https://pypi.org/project/awxkit/">awxkit</a> is an open source tool that
makes it easy to use HTTP requests to access the automation controller
API. You can have awxkit acquire a PAT on your behalf by using the
<code>awxkit login</code> command. Refer to the
<a href="https://docs.ansible.com/automation-controller/latest/html/controllercli/index.html">AWX
Command Line Interface</a> for more detail.</p>
</div>
<div class="paragraph">
<p>For more information on how to use OAuth 2 in the automation controller
in the context of integrating external applications, see
<code>ag_oauth2_token_auth</code> in the Automation Controller Administration
Guide.</p>
</div>
<div class="paragraph">
<p>If you need to write custom requests, you can write a Python script
using <a href="https://pypi.org/project/requests/">Python library requests</a>, like
in this example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>import requests
oauth2_token_value = 'y1Q8ye4hPvT61aQq63Da6N1C25jiA'   # your token value from controller
url = 'https://&lt;controller-host&gt;/api/v2/users/'
payload = {}
headers = {'Authorization': 'Bearer ' + oauth2_token_value,}

# makes request to controller user endpoint
response = requests.request('GET', url, headers=headers, data=payload,
allow_redirects=False, verify=False)

# prints json returned from controller with formatting
print(json.dumps(response.json(), indent=4, sort_keys=True))</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api_sso_auth"><a class="anchor" href="#api_sso_auth"></a>10.4. SSO Authentication</h3>
<div class="paragraph">
<p>Single sign-on (SSO) authentication methods are fundamentally different
from other methods because the authentication of the user happens
external to the automation controller, like Google SSO, Azure SSO, SAML,
or GitHub. For example, with GitHub SSO, GitHub is the single source of
truth, which verifies your identity based on the username and password
you gave the controller.</p>
</div>
<div class="paragraph">
<p>You can configure SSO authentication using the automation controller
inside a large organization with a central Identity Provider. Once you
have configured an SSO method in the controller, a button for that SSO
will be present on the login screen. If you click that button, it will
redirect you to the Identity Provider, in this case GitHub, where you
will present your credentials. If the Identity Provider verifies you
successfully, then the controller will make a user linked to your GitHub
user (if this is your first time logging in via this SSO method), and
log you in.</p>
</div>
<div class="paragraph">
<p>For the various types of supported SSO authentication methods, see
<code>ag_social_auth</code> and <code>ag_ent_auth</code> in the Automation Controller
Administration Guide.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-10-20 13:25:06 UTC
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>